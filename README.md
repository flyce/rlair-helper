# Rlair E-learning auto-click helper
## 如果使用？
1. 选择页面上的`code` -> `download zip`，下载文件并解压。
2. 打开`chrome://extensions/`,并启用开发者模式。
3. 选择页面左边的“加载已解压的扩展程序”，选择刚才你解压的目录。

## 实现原理
在线培训系统会定期从浏览器上报培训情况，并返回一个带百分数的进度。
此情况下，就有两种方案来解决这个问题，方案一是模拟发送这个上报的请求，一个章节完成是，再发送下一个章节的请求。方案二是监听上报的结果，完成后操作浏览器切换到下一个章节，不断往复。
### 优缺点分析
|  方案   | 优点  | 缺点 ｜
|  ----  | ----  | ---- |
| 方案一  | 不用一直打开浏览器，能保证最短的时间完成，而且可以同时完成多个 | 需要模拟请求，比较麻烦，且参数如果计算不对，就会被IT发现。 |
| 方案二  | 安全，完全模拟人工，IT不会发现 | 需要一直打开浏览器，且如果不在前台进度就会暂停，多个培训需要手动切换 |

### 具体实现
此插件选择了方案二，当接收到的http响应返回为100%时，切换到下一个章节（如果有）。具体实现需要分为几步。
1. 拦截http请求的响应，受限于Blink的安全性限制，只能使用调试工具获取到http response，所以在检测到培训播放页面时，会有调试浏览器的提示。
2. 当第一步获取到进度是100%，遍历所有培训的dom，获取当前的章节和所有章节，并判断是否需要切换。此处的dom操作是利用chrome得scripting功能，注入脚本到网页中。每一个培训氛围课程ID和章节ID，课程ID对方案二来说，没有任何意义，因为需要手动切换课程。获取章节ID则可以通过获取添加在每一个培训的播放按钮上的data-id属性来得到（顺便吐槽一句，垃圾公司，什么年代了，还在不用restful API）。同样，也可以在data-id所在的dom上添加click事件来模拟人工点击下一个。